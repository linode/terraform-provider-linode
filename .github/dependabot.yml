version: 2
updates:
  # NOTE: We redefine these entries for each branch because of the following dependabot issues:
  # * target-branch cannot be an array: https://github.com/dependabot/dependabot-core/issues/2511
  # * target-branch cannot be a wildcard: https://github.com/dependabot/dependabot-core/issues/6890
  # * YAML aliases are unsupported: https://github.com/dependabot/dependabot-core/issues/1582

  # dev
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "weekly"
    ignore:
      - dependency-name: "github.com/linode/terraform-provider-linode/linode"
      - dependency-name: "github.com/aws/aws-sdk-go-v2*"
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "monthly"
    allow:
      - dependency-name: "github.com/aws/aws-sdk-go-v2*"
  - package-ecosystem: "gomod"
    directory: "/tools"
    schedule:
      interval: "weekly"
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"

  # extended-support/v2
  - package-ecosystem: "gomod"
    target-branch: extended-support/v2
    directory: "/"
    schedule:
      interval: "weekly"
    ignore:
      - dependency-name: "github.com/linode/terraform-provider-linode/linode"
      - dependency-name: "github.com/aws/aws-sdk-go-v2*"
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "monthly"
    allow:
      - dependency-name: "github.com/aws/aws-sdk-go-v2*"
  - package-ecosystem: "gomod"
    target-branch: extended-support/v2
    directory: "/tools"
    schedule:
      interval: "weekly"
  - package-ecosystem: "github-actions"
    target-branch: extended-support/v2
    directory: "/"
    schedule:
      interval: "weekly"
