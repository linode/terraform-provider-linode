{{ define "stackscripts_data_substring" }}

resource "linode_stackscript" "stackscript" {
    label = "{{.Label}}"
    script = <<EOF
{{.Script}}EOF
	images = ["linode/ubuntu24.04", "linode/ubuntu22.04"]
	description = "test"
	rev_note = "initial"
}

data "linode_stackscripts" "stackscript" {
	filter {
		name = "label"
		values = [linode_stackscript.stackscript.label]
		match_by = "substring"
	}

	filter {
		name = "is_public"
		values = [false]
	}
}

{{ end }}