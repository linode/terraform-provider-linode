{{ define "nbs_data_basic" }}

resource "linode_nodebalancer" "foobar" {
    label = "{{.Label}}"
    region = "{{ .Region }}"
    client_conn_throttle = 20
    tags = ["tf_test"]
}

data "linode_nodebalancers" "nbs" {
    filter {
        name = "label"
        values = [linode_nodebalancer.foobar.label]
    }

    filter {
        name = "tags"
        values = ["tf_test"]
    }
}

{{ end }}